<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            <h:outputText value="#{bundle.CreateVerificacionAmbienteTituladoTitle}"></h:outputText>
        </ui:define>
        <ui:define name="body">
            <div id="Layout_Titulo_Formulario_Agef"> <h2>VERIFICACIÓN DE AMBIENTES</h2></div>
            <div id="Layout_Nom_Form_Agef">
                <h3 id="margen"> #{bundle.CreateVerificacionAmbienteTituladoTitle}</h3>
                <div id="Layout_Formulario_Agef">
                    <br></br>  
                    <p:growl id="msgs" showDetail="false" sticky="false"/>
                    <h:form id="formVerificacionAmbienteTitulado">
                        <div id="form" align="center">
                            <p:panelGrid>

                                <f:facet  name="header">
                                    <p:row>
                                        <p:column colspan="1">
                                            <h:outputLabel value="#{bundle.CreateFichaCaracterizacionLabel_idFichaCaracterizacion}" for="idFichaCaracterizacion" />
                                        </p:column>
                                        <p:column colspan="3" style="border-right: white"> 
                                            <p:commandButton process="@this" id="idFichaCaracterizacion3" icon="ui-icon-search" onclick="dlgBuscarFichas.show();"  type="button" />
                                        </p:column>
                                        <p:column colspan="6" style="border-right: white">    
                                            #{bundle.CreateFichaCaracterizacionTitle}
                                        </p:column>
                                    </p:row>
                                </f:facet>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="Regional" for="nomReg" />
                                    </p:column>
                                    <p:column colspan="1" >    
                                        <h:outputText value="#{verificacionAmbienteTituladoController.selected.idFichaCaracterizacion.idProyectoFormativo.idPrograma.idCentroFormacion.idRegional.nomReg}" />
                                    </p:column >
                                    <p:column colspan="2">
                                        <h:outputLabel value="Centro de Formacion" />
                                    </p:column>
                                    <p:column colspan="6" >    
                                        <h:outputText value="#{verificacionAmbienteTituladoController.selected.idFichaCaracterizacion.idProyectoFormativo.idPrograma.idCentroFormacion.nomCen}" />
                                    </p:column >
                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="Programa de Formación"  />
                                    </p:column>
                                    <p:column colspan="1" >    
                                        <h:outputText value="#{verificacionAmbienteTituladoController.selected.idFichaCaracterizacion.idProyectoFormativo.idPrograma.nomPrg}" />
                                    </p:column >
                                    <p:column colspan="2">
                                        <h:outputLabel value="Código de Programa" />
                                    </p:column>
                                    <p:column colspan="6" >    
                                        <h:outputText value="#{verificacionAmbienteTituladoController.selected.idFichaCaracterizacion.idProyectoFormativo.idPrograma}" />
                                    </p:column >
                                </p:row>
                                <p:row>
                                    <p:column colspan="10" styleClass="ui-widget-header" ><center>Datos del Responsable</center></p:column>
                                </p:row>

                                <p:row>
                                    <p:column>
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_idUsuario}" for="idUsuario" />
                                    </p:column>
                                    <p:column colspan="3">    
                                        <p:commandButton id="idUsuario2" process="@this" icon="ui-icon-search" onclick="dlgBuscarUsuario.show();" type="button"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="Identificacion" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">  
                                        <h:outputText value="#{verificacionAmbienteTituladoController.selected.idUsuario.numeroDocumento}" title="#{bundle.CreateProgramaTitle_nomPrg}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="Nombre" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">  
                                        <h:outputText value="#{verificacionAmbienteTituladoController.selected.idUsuario.nomUsu}" title="#{bundle.CreateProgramaTitle_nomPrg}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="10" styleClass="ui-widget-header" ><center>Identificacion del Ambiente</center></p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_localizacion}" for="localizacion" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">    
                                        <p:inputText id="localizacion" value="#{verificacionAmbienteTituladoController.selected.localizacion}" title="#{bundle.CreateVerificacionAmbienteTituladoTitle_localizacion}" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_localizacion}"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_denominacion}" for="denominacion" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">    
                                        <p:inputText id="denominacion" value="#{verificacionAmbienteTituladoController.selected.denominacion}" title="#{bundle.CreateVerificacionAmbienteTituladoTitle_denominacion}" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_denominacion}"/>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_tipoAmbiente}" for="tipoAmbiente" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">    
                                        <p:inputText id="tipoAmbiente" value="#{verificacionAmbienteTituladoController.selected.tipoAmbiente}" title="#{bundle.CreateVerificacionAmbienteTituladoTitle_tipoAmbiente}" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_tipoAmbiente}"/>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column colspan="10" styleClass="ui-widget-header" ><center>Lista de Verificacion</center></p:column>
                                </p:row>

                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_ciudad}" for="ciudad" />
                                    </p:column>
                                    <p:column colspan="1" >    
                                        <p:inputText id="ciudad" value="#{verificacionAmbienteTituladoController.selected.ciudad}" title="#{bundle.CreateVerificacionAmbienteTituladoTitle_ciudad}" />
                                    </p:column >
                                    <p:column colspan="2">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_fecha}" for="fecha" />
                                    </p:column>
                                    <p:column colspan="6" >    
                                        <p:calendar navigator="true" pattern="MM/dd/yyyy" showOn="button" id="fecha" value="#{verificacionAmbienteTituladoController.selected.fecha}" title="#{bundle.CreateVerificacionAmbienteTituladoTitle_fecha}" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_fecha}"/>
                                    </p:column >
                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_viabilidadAmbiente}" for="viabilidadAmbiente" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">    

                                        <p:selectBooleanButton id="viabilidadAmbiente" value="#{verificacionAmbienteTituladoController.selected.viabilidadAmbiente}" onLabel="Si" offLabel="No" onIcon="ui-icon-check" offIcon="ui-icon-close" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_viabilidadAmbiente}"/> 

                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_idProyectoFormativo}" for="idProyectoFormativo" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white"> 
                                        <p:selectOneMenu id="idProyectoFormativo" value="#{verificacionAmbienteTituladoController.selected.idProyectoFormativo}" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_idProyectoFormativo}">
                                            <f:selectItems value="#{proyectoFormativoController.itemsAvailableSelectOne}"/>
                                        </p:selectOneMenu>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column colspan="1">
                                        <h:outputLabel value="#{bundle.CreateVerificacionAmbienteTituladoLabel_idListaVerificacion}" for="idListaVerificacion" />
                                    </p:column>
                                    <p:column colspan="9" style="border-right: white">    
                                        <p:selectOneMenu id="idListaVerificacion" value="#{verificacionAmbienteTituladoController.selected.idListaVerificacion}" required="true" requiredMessage="#{bundle.CreateVerificacionAmbienteTituladoRequiredMessage_idListaVerificacion}">
                                            <f:selectItems value="#{listaVerificacionController.itemsAvailableSelectOne}"/>
                                        </p:selectOneMenu>
                                    </p:column>
                                  
                                </p:row> 
                            </p:panelGrid>
                            <br />
                            <br />
                            <p:commandButton process="@this, @form" update="@form, :msgs, :formListaVerificacion"
                                             action="#{verificacionAmbienteTituladoController.create}" value="#{bundle.CreateVerificacionAmbienteTituladoSaveLink}" icon="ui-icon-disk"/>
                            <br />
                            <br />
                            <p:commandButton ajax="false" action="#{verificacionAmbienteTituladoController.prepareList}" value="#{bundle.CreateVerificacionAmbienteTituladoShowAllLink}" immediate="true"/>
                        </div>
                    </h:form>
                    <br/><br/>
                </div>
            </div>
            <div id="Layout_Info_Agef">
                <h4>INFORMACION</h4>
                <hr></hr>
                <p id="margen">Informacion de ayuda para formularios <hr></hr><br/>
                    Lo primero que tendra que hacer es buscar la ficha de caracterización, en el 
                    botón de bucar que aparece en el centro del formuario.
                </p>
            </div>
        </ui:define>
        <ui:define name="dialogs">


            <p:dialog  id="dialog2"   closeOnEscape="true" header="#{bundle.CreateListaVerificacionTitle}" widgetVar="dlg3" minHeight="300" minWidth="450" 
                       resizable="true" modal="true" showEffect="clip" hideEffect="clip">
                <ui:include src="../listaVerificacion/Create.xhtml" />
            </p:dialog> 
            <p:dialog id="buscarFichas" widgetVar="dlgBuscarFichas" modal="true" resizable="false">
                <p:growl id="msgDialogoBuscara"/>
                <p:tabView>
                    <p:tab title="Buscar">
                        <h:form id="formularioBuscara"> 
                            <p:panelGrid>
                                <p:row>
                                    <p:column>   
                                        <p:inputText id="idFichaCaracterizacion" value="#{verificacionAmbienteTituladoController.selectedFicha.idFichaCaracterizacion}" title="#{bundle.CreateFichaCaracterizacionTitle_idFichaCaracterizacion}"/>
                                        <p:watermark value="#{bundle.CreateFichaCaracterizacionLabel_idFichaCaracterizacion}" for="idFichaCaracterizacion" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText id="nomPrograma" value="#{verificacionAmbienteTituladoController.selectedPrograma.nomPrg}" title="#{bundle.CreateProgramaTitle_nomPrg}" />
                                        <p:watermark value="#{bundle.CreateProgramaLabel_nomPrg}" for="nomPrograma" />
                                    </p:column>   
                                    <p:column >
                                        <p:commandButton action="#{verificacionAmbienteTituladoController.buscarFicha()}"
                                                         value="Buscar"
                                                         icon="ui-icon-search"
                                                         process="@this,idFichaCaracterizacion,nomPrograma"
                                                         update="tablaFichaCaracterizaciones, :msgs"/>
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                            <br /><br /><br />
                            <p:dataTable value="#{verificacionAmbienteTituladoController.listBusquedaFicha}"
                                         var="item" paginator="true" rows="5" id="tablaFichaCaracterizaciones">
                                <p:column> 
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListFichaCaracterizacionTitle_idFichaCaracterizacion}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idFichaCaracterizacion}"/>
                                </p:column>
                                <p:column >  
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListFichaCaracterizacionTitle_idProyectoFormativo}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idProyectoFormativo}"/>
                                </p:column>
                                <p:column >  
                                    <f:facet name="header">
                                        <h:outputText value="#{bundle.ListFichaCaracterizacionTitle_idPrograma}"/>
                                    </f:facet>
                                    <h:outputText value="#{item.idPrograma}"/>
                                </p:column>
                                <p:column>
                                    <p:commandButton id="botonSeleccionFicha" process="@this" action="#{verificacionAmbienteTituladoController.agregarFicha()}"
                                                     oncomplete="dlgBuscarFichas.hide();" icon="ui-icon-plus" update=":formVerificacionAmbienteTitulado, :buscarFichas">
                                        <f:setPropertyActionListener value="#{item}" target="#{verificacionAmbienteTituladoController.selectedFicha}"/>
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>
                        </h:form>
                    </p:tab>
                </p:tabView>   
            </p:dialog>
            <p:dialog id="buscarCliente" widgetVar="dlgBuscarUsuario" modal="true" resizable="false" 
                      showEffect="clip" hideEffect="clip" closeOnEscape="true">
                <p:growl id="msgDialogoBuscar"/>
                <p:tabView>
                    <p:tab title="Buscar">
                        <h:form id="formularioBuscarUsuario"> 
                            <p:panelGrid>                        
                                <p:row>
                                    <p:column style="border-right: white">    
                                        <p:inputText id="numeroDocumento" value="#{verificacionAmbienteTituladoController.usuarioActual.numeroDocumento}" title="#{bundle.CreateUsuarioTitle_numeroDocumento}" required="true" requiredMessage="#{bundle.CreateUsuarioRequiredMessage_numeroDocumento}"/>
                                        <p:watermark value="#{bundle.CreateUsuarioLabel_numeroDocumento}" for="numeroDocumento" />
                                    </p:column>
                                    <p:column style="border-right: white">    
                                        <p:inputText id="nomUsu" value="#{verificacionAmbienteTituladoController.usuarioActual.nomUsu}" title="#{bundle.CreateUsuarioTitle_nomUsu}" required="true" requiredMessage="#{bundle.CreateUsuarioRequiredMessage_nomUsu}"/>
                                        <p:watermark value="#{bundle.CreateUsuarioLabel_nomUsu}" for="nomUsu" />
                                    </p:column>
                                    <p:column style="border-right: white">    
                                        <p:inputText id="apeUsu" value="#{verificacionAmbienteTituladoController.usuarioActual.apeUsu}" title="#{bundle.CreateUsuarioTitle_apeUsu}" required="true" requiredMessage="#{bundle.CreateUsuarioRequiredMessage_apeUsu}"/>
                                        <p:watermark value="#{bundle.CreateUsuarioLabel_apeUsu}" for="apeUsu" />
                                    </p:column> 
                                </p:row>
                                <p:row>

                                    <p:column colspan="3">
                                        <center>
                                            <p:commandButton action="#{verificacionAmbienteTituladoController.buscarUsuario()}"
                                                             value="Buscar"
                                                             icon="ui-icon-search"
                                                             process="@this,numeroDocumento,nomUsu,apeUsu"
                                                             update="tablaUsuarios, :msgDialogoBuscar"/>
                                        </center>
                                    </p:column>
                                </p:row>



                            </p:panelGrid>
                            <br /><br /><br />
                            <p:dataTable value="#{verificacionAmbienteTituladoController.listBusquedaUsuarios}"
                                         var="item" paginator="true" rows="5" id="tablaUsuarios">
                                <p:column>
                                    <h:outputText value="#{item.numeroDocumento}"/>
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{item.nomUsu}"/>
                                </p:column>
                                <p:column>
                                    <h:outputText value="#{item.apeUsu}"/>
                                </p:column>
                                <p:column>
                                    <p:commandButton id="botonSeleccionUsuario" process="@this"  action="#{verificacionAmbienteTituladoController.agregarUsuario()}"
                                                     oncomplete="dlgBuscarUsuario.hide();"  icon="ui-icon-plus" update=":formVerificacionAmbienteTitulado :buscarCliente" >
                                        <f:setPropertyActionListener value="#{item}" target="#{verificacionAmbienteTituladoController.usuarioActual}" />
                                    </p:commandButton>
                                </p:column>
                            </p:dataTable>  
                        </h:form> 
                    </p:tab>
                </p:tabView>  
            </p:dialog>

        </ui:define>

    </ui:composition>

</html>
